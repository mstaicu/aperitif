version: "3.4"
services:
  express:
    image: node:12-stretch
    working_dir: /home/node/express
    volumes:
      # bind mount the host sources to the container sources
      - type: bind
        source: ./express
        target: /home/node/express
      # volume mount the node_modules stored in the nodemodules volume
      - type: volume
        source: nodemodules # name of the volume, see below
        target: /home/node/express/node_modules
        volume:
          nocopy: true
    command: npm start
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
      - PORT=3000
      - MORGAN_LEVEL=tiny
      - SIGNATURE=supersecret
volumes:
  nodemodules:
