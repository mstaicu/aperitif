apiVersion: cert-manager.io/v1
kind: Issuer

metadata:
  name: selfsigned-tma-issuer

spec:
  selfSigned: {}
---
apiVersion: cert-manager.io/v1
kind: Certificate

metadata:
  name: tma-ca

spec:
  isCA: true
  commonName: "TMA"
  secretName: tma-ca-secret
  duration: 8760h # 1 year
  renewBefore: 240h # 10 days
  issuerRef:
    name: selfsigned-tma-issuer
---
apiVersion: cert-manager.io/v1
kind: Issuer

metadata:
  name: tma-issuer

spec:
  ca:
    secretName: tma-ca-secret
---
apiVersion: cert-manager.io/v1
kind: Certificate

metadata:
  name: tma-cert

spec:
  dnsNames:
    - "*.default.svc.cluster.local"
  secretName: tma-cert-tls
  issuerRef:
    name: tma-issuer
